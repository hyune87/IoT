# 1.화면
 ## 1.1 첫번째화면
![image](https://user-images.githubusercontent.com/105696818/168772361-0de4a9bd-bfbd-437f-bdfc-a5054492ec5b.png)
 ## 1.2 두번째화면
![image](https://user-images.githubusercontent.com/105696818/168772634-3477427f-18db-4e3b-a4ce-b9a7aff56655.png)

# 2.Node-red
 ## 2.1 사용된 Node 설명
 ![image](https://user-images.githubusercontent.com/105696818/168935824-629a2644-dd1d-48b8-922b-6353dc1c22b3.png)
![image](https://user-images.githubusercontent.com/105696818/168935829-bded1cda-76b6-42ca-8177-e41c5776fb0a.png)
![image](https://user-images.githubusercontent.com/105696818/168935837-8f36c609-0a32-481e-9cbb-1a202037d1b3.png)
![image](https://user-images.githubusercontent.com/105696818/168935843-acdd8c39-8d89-4767-a43f-5865ad1ced96.png)
![image](https://user-images.githubusercontent.com/105696818/168935848-f0553dbc-3aa4-476a-981d-dc64eea61acf.png)
![image](https://user-images.githubusercontent.com/105696818/168935852-76d3564f-eccb-4285-bd1e-6aaacee28a8b.png)

 
 ## 2.2 적용센서 : 온도, 습도, 진동, 이산화탄소, 미세먼지, 초미세먼지, 포름알데히드
![image](https://user-images.githubusercontent.com/105696818/168933848-4efd4ee8-5d33-428d-97b7-1c5e7f2a3632.png)


# 3.Node-Red source
<pre><code>[{"id":"31255eb2.dcde12","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"c20b25c0.cf1308","type":"inject","z":"31255eb2.dcde12","name":"","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":100,"wires":[["124da293.464f4d"]]},{"id":"996ae4ba.236138","type":"http request","z":"31255eb2.dcde12","name":"","method":"GET","ret":"txt","paytoqs":false,"url":"http://center.koamise.com/msg/recent/100000006a1aa27d","tls":"","persist":false,"proxy":"","authType":"","x":450,"y":100,"wires":[["121711af.e4aaee","67d9ce9a.08dd1"]]},{"id":"124da293.464f4d","type":"function","z":"31255eb2.dcde12","name":"","func":"msg.headers = {\n    'serviceKey':'d495777b-b67e-4198-8881-fa5207b13136 '\n};\nmsg.rejectUnauthorized = false; \nreturn msg;","outputs":1,"noerr":0,"x":270,"y":100,"wires":[["996ae4ba.236138"]]},{"id":"d721b0b8.36445","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":990,"y":100,"wires":[]},{"id":"121711af.e4aaee","type":"function","z":"31255eb2.dcde12","name":"","func":"sensorInfo = JSON.parse(msg.payload)\ndata = sensorInfo.data\narray = [\n            {\n                pm25:data.pm25,\n                pm100:data.pm100,\n                co2:data.co2,\n                hcho:data.hcho,\n                temperature:data.temperature,\n                humidity:data.humidity,\n                time: new Date()\n            },\n            {\n            }\n        ];\nmsg.payload = array\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":100,"wires":[["d721b0b8.36445","397691f9.472e4e"]]},{"id":"397691f9.472e4e","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"25fc7e7a.c6d172","name":"","measurement":"sensor","precision":"","retentionPolicy":"","x":950,"y":140,"wires":[]},{"id":"67d9ce9a.08dd1","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":560,"y":140,"wires":[]},{"id":"1d62566c.a5431a","type":"http in","z":"31255eb2.dcde12","name":"","url":"/stateSensors","method":"post","upload":false,"swaggerDoc":"","x":150,"y":300,"wires":[["55bb44c0.0fac6c","331d088b.bd2898"]]},{"id":"55bb44c0.0fac6c","type":"http response","z":"31255eb2.dcde12","name":"","statusCode":"","headers":{},"x":880,"y":300,"wires":[]},{"id":"1bd335ae.c2356a","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":710,"y":320,"wires":[]},{"id":"331d088b.bd2898","type":"function","z":"31255eb2.dcde12","name":"","func":"sensorInfo = JSON.parse(msg.payload)\nsensorInfo.curr = JSON.parse(sensorInfo.curr)\n//data = sensorInfo.data\n/*\narray = [\n            {\n                pm25:data.pm25,\n                pm100:data.pm100,\n                co2:data.co2,\n                hcho:data.hcho,\n                temperature:data.temperature,\n                humidity:data.humidity,\n                time: new Date()\n            },\n            {\n            }\n        ];\n*/\nmsg.payload = sensorInfo\nmsg.time = new Date();\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":360,"wires":[["684c67f4.565d48","524305ce.e7020c","c3d07e3d.bf6a"]]},{"id":"f2b33ff6.c7b35","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"25fc7e7a.c6d172","name":"","measurement":"sensorState","precision":"","retentionPolicy":"","x":790,"y":400,"wires":[]},{"id":"c3d07e3d.bf6a","type":"function","z":"31255eb2.dcde12","name":"상태값","func":"obj = msg.payload.in_bounds;\nobj[\"time\"] = msg.time;\narray = [\n            msg.payload.in_bounds,\n            {\n            }\n        ];\nmsg.payload = array\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":400,"wires":[["1bd335ae.c2356a","f2b33ff6.c7b35"]]},{"id":"524305ce.e7020c","type":"function","z":"31255eb2.dcde12","name":"예측치","func":"obj = msg.payload.pred;\nobj[\"time\"] = msg.time;\narray = [\n            msg.payload.pred,\n            {\n            }\n        ];\nmsg.payload = array\n\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":360,"wires":[["1bd335ae.c2356a"]]},{"id":"684c67f4.565d48","type":"function","z":"31255eb2.dcde12","name":"실제값","func":"obj = msg.payload.curr.data;\nobj[\"time\"] = msg.time;\narray = [\n            obj,\n            {\n            }\n        ];\nmsg.payload = array \nreturn msg;","outputs":1,"noerr":0,"x":450,"y":320,"wires":[["1bd335ae.c2356a"]]},{"id":"e137ed41.a92fc","type":"http in","z":"31255eb2.dcde12","name":"","url":"/fire","method":"post","upload":false,"swaggerDoc":"","x":100,"y":480,"wires":[["a7699f6d.22a8d","915c74b6.63bf48"]]},{"id":"a7699f6d.22a8d","type":"http response","z":"31255eb2.dcde12","name":"","statusCode":"","headers":{},"x":850,"y":480,"wires":[]},{"id":"915c74b6.63bf48","type":"function","z":"31255eb2.dcde12","name":"","func":"obj = JSON.parse(msg.payload)\nobj[\"time\"] = new Date();\nmsg.payload =[\n    obj,{}\n    ]\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":560,"wires":[["74a23581.44524c","d93b6844.65b3b8"]]},{"id":"d93b6844.65b3b8","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":510,"y":520,"wires":[]},{"id":"74a23581.44524c","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"25fc7e7a.c6d172","name":"","measurement":"fireState","precision":"","retentionPolicy":"","x":580,"y":560,"wires":[]},{"id":"6e292cbc.ac8474","type":"http in","z":"31255eb2.dcde12","name":"","url":"/sensor","method":"get","upload":false,"swaggerDoc":"","x":90,"y":640,"wires":[["3f827135.684dbe"]]},{"id":"16e8c52d.b9aa3b","type":"influxdb in","z":"31255eb2.dcde12","influxdb":"25fc7e7a.c6d172","name":"","query":"","rawOutput":false,"precision":"","retentionPolicy":"","x":520,"y":640,"wires":[["7170a3e7.35b12c"]]},{"id":"3f827135.684dbe","type":"function","z":"31255eb2.dcde12","name":"","func":"item = msg.req.query.item;\nmeasurement = msg.req.query.measurement;\nmsg.query = 'select '+item+' from '+measurement+' order by desc limit 1'\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":640,"wires":[["16e8c52d.b9aa3b"]]},{"id":"b6a397ff.173bf8","type":"http response","z":"31255eb2.dcde12","name":"","statusCode":"","headers":{},"x":890,"y":640,"wires":[]},{"id":"3480e5e9.6a415a","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":790,"y":600,"wires":[]},{"id":"7170a3e7.35b12c","type":"function","z":"31255eb2.dcde12","name":"","func":"msg.payload = msg.payload[0][Object.keys(msg.payload[0])[1]]\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":640,"wires":[["b6a397ff.173bf8","3480e5e9.6a415a"]]},{"id":"a78e907d.49059","type":"inject","z":"31255eb2.dcde12","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":740,"wires":[["8724bcd1.7bbde"]]},{"id":"8724bcd1.7bbde","type":"function","z":"31255eb2.dcde12","name":"","func":"array = [\n            {\n                //value : value,\n                hit : 1,\n                hit_C : 0,\n                hit_C1 : 0,\n                hit_C2 : 0,\n                hit_C3 : 0,\n                hit_V : 0,\n                hit_A : 1,\n                hit_op : 1,\n                hit_stat : \"이상\",\n                dan : 0,\n                dan_C : 1,\n                dan_C1 : 0,\n                dan_C2 : 0,\n                dan_C3 : 0,\n                dan_V : 0,\n                dan_A : 1,\n                dan_HZ : 0,\n                dan_op : 1,\n                dan_stat : \"정상작동\",\n                trim : 0,\n                trim_V : \"정상작동\",\n                trim_A : \"이상\",\n                trim_op : 1,\n                trim_stat : \"이상\",\n                //is_op : is_op,\n                //all : all,\n                //stat : stat,\n                //line : line,\n                //index : lineNum,\n                time: new Date()\n            },\n            {\n                \n            }\n        ];\nmsg.payload = array\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":740,"wires":[["6f3189dc.be10d8","61734d30.cc3f44","f0f8a3b.225686","10ae6df.eb22e92","1f3782ba.0a85ad"]]},{"id":"6f3189dc.be10d8","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"cbf880ac.57156","name":"","measurement":"BP45","precision":"","retentionPolicy":"","x":570,"y":680,"wires":[]},{"id":"61734d30.cc3f44","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"cbf880ac.57156","name":"","measurement":"BP75","precision":"","retentionPolicy":"","x":570,"y":720,"wires":[]},{"id":"f0f8a3b.225686","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"cbf880ac.57156","name":"","measurement":"BP13","precision":"","retentionPolicy":"","x":570,"y":760,"wires":[]},{"id":"10ae6df.eb22e92","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"cbf880ac.57156","name":"","measurement":"BP25","precision":"","retentionPolicy":"","x":570,"y":800,"wires":[]},{"id":"1f3782ba.0a85ad","type":"debug","z":"31255eb2.dcde12","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":880,"wires":[]},{"id":"1d6bff69.f44761","type":"inject","z":"31255eb2.dcde12","name":"","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":220,"wires":[["d287cf89.b52ae"]]},{"id":"d287cf89.b52ae","type":"function","z":"31255eb2.dcde12","name":"","func":"\nvar array = [\n            {\n                temp:Number((Math.random()*2 + 28).toFixed(2)),\n                vibr:Number((Math.random()*0.2 + 0).toFixed(1)),\n                time: new Date()\n            },\n            {\n            }\n        ];\nmsg.payload = array\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":220,"wires":[["b20d13c1.28fb3"]]},{"id":"b20d13c1.28fb3","type":"influxdb out","z":"31255eb2.dcde12","influxdb":"25fc7e7a.c6d172","name":"","measurement":"msant","precision":"","retentionPolicy":"","x":530,"y":220,"wires":[]},{"id":"f511302b.4847d","type":"comment","z":"31255eb2.dcde12","name":"진동온도와 진동값은 랜덤값을 influxdb에 적재","info":"","x":190,"y":180,"wires":[]},{"id":"25fc7e7a.c6d172","type":"influxdb","z":"","hostname":"influxdb","port":"8086","protocol":"http","database":"idbSensor","name":"","usetls":false,"tls":"7bfc586.370d0a8"},{"id":"cbf880ac.57156","type":"influxdb","z":"","hostname":"influxdb","port":"8086","protocol":"http","database":"test","name":"","usetls":false,"tls":"807ce7a7.8e5558"},{"id":"7bfc586.370d0a8","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false},{"id":"807ce7a7.8e5558","type":"tls-config","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"","servername":"","verifyservercert":false}]</pre></code>

